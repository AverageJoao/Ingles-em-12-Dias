<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Past Perfect Tense - Learning Guide</title>
    <style>
        :root {
            /* Light Theme Variables */
            --bg-body: #fdfbf7;
            --bg-card: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #636e72;
            --primary: #6c5ce7;
            --secondary: #00cec9;
            --accent: #fdcb6e;
            --border: #dfe6e9;
            --shadow: 0 4px 15px rgba(0,0,0,0.05);
            --correct: #00b894;
            --wrong: #d63031;
        }

        [data-theme="dark"] {
            /* Dark Theme Variables */
            --bg-body: #1e272e;
            --bg-card: #2d3436;
            --text-main: #dfe6e9;
            --text-muted: #b2bec3;
            --primary: #a29bfe;
            --secondary: #81ecec;
            --accent: #ffeaa7;
            --border: #4a5559;
            --shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        * { box-sizing: border-box; transition: background-color 0.3s, color 0.3s; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- Header & Nav --- */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 3rem 1rem;
            text-align: center;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
        }

        h1 { margin: 0; font-size: 2.5rem; letter-spacing: 1px; }
        .subtitle { font-size: 1.1rem; opacity: 0.9; margin-top: 10px; }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.5);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }

        .theme-toggle:hover { background: rgba(255,255,255,0.3); }

        /* --- Container --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- Cards & Sections --- */
        section {
            background-color: var(--bg-card);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-top: 0;
        }

        .highlight-box {
            background-color: rgba(108, 92, 231, 0.1);
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        /* --- Formula & Tables --- */
        .formula {
            font-size: 1.5rem;
            text-align: center;
            font-weight: bold;
            padding: 20px;
            color: var(--text-main);
            background: linear-gradient(to right, transparent, var(--accent), transparent);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            overflow: hidden;
            border-radius: 10px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background-color: var(--primary);
            color: white;
        }

        tr:nth-child(even) { background-color: rgba(0,0,0,0.02); }

        /* Responsive Table */
        .table-responsive {
            overflow-x: auto;
        }

        /* --- Timeline Visual --- */
        .timeline-example {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .time-point {
            text-align: center;
            background: var(--bg-card);
            border: 2px solid var(--secondary);
            padding: 10px;
            border-radius: 10px;
            flex: 1;
            min-width: 120px;
        }
        .arrow { font-size: 2rem; color: var(--text-muted); }

        /* --- Top Tip --- */
        .top-tip {
            background-color: #ffeaa7; /* Always yellow-ish */
            color: #2d3436;
            padding: 20px;
            border-radius: 15px;
            position: relative;
            border: 2px dashed #fdcb6e;
        }
        .top-tip h3 { margin-top: 0; display: flex; align-items: center; gap: 10px; }
        .top-tip::before { content: "üí°"; position: absolute; top: -15px; right: -10px; font-size: 2rem; transform: rotate(15deg); }

        /* --- Exercises --- */
        .exercise-area { margin-top: 20px; }
        .question { margin-bottom: 15px; padding: 10px; border-bottom: 1px solid var(--border); }
        
        input[type="text"], select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid var(--text-muted);
            background: var(--bg-body);
            color: var(--text-main);
            font-size: 1rem;
        }

        .btn-check {
            background-color: var(--secondary);
            color: #fff;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-check:hover { transform: translateY(-2px); box-shadow: 0 6px 8px rgba(0,0,0,0.15); }

        .feedback { display: none; margin-left: 10px; font-weight: bold; }
        .correct { color: var(--correct); }
        .incorrect { color: var(--wrong); }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .timeline-example { flex-direction: column; }
            .arrow { transform: rotate(90deg); }
        }
    </style>
</head>
<body data-theme="light">

    <header>
        <button class="theme-toggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è Mode</button>
        <h1>Past Perfect</h1>
        <div class="subtitle">The past in the past</div>
    </header>

    <div class="container">

        <section>
            <h2>üìö Definition</h2>
            <p>The <strong>past perfect tense</strong> expresses an action in the past before another action in the past.</p>
            <div class="highlight-box">
                <p>This is the <em>past in the past</em>, an action taking place before a certain time in the past.</p>
            </div>
        </section>

        <section>
            <h2>üèóÔ∏è Structure</h2>
            <p>The structure of the past perfect tense is:</p>
            <div class="formula">
                had + past participle
            </div>

            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Auxiliary Verb (Simple Past)</th>
                            <th>Main Verb (Past Participle)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>She</td>
                            <td>had</td>
                            <td>been</td>
                        </tr>
                        <tr>
                            <td>They</td>
                            <td>had</td>
                            <td>eaten</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section>
            <h2>‚è±Ô∏è Example Scenario</h2>
            <p><em>"The train left at 9am. We arrived at 9:15am. When we arrived, the train had left already."</em></p>
            
            <div class="timeline-example">
                <div class="time-point">
                    <strong>9:00 AM</strong><br>
                    üöÇ The train left<br>
                    <small>(Past Perfect)</small>
                </div>
                <div class="arrow">‚ûú</div>
                <div class="time-point">
                    <strong>9:15 AM</strong><br>
                    üèÉ We arrived<br>
                    <small>(Simple Past)</small>
                </div>
            </div>
        </section>

        <section>
            <h2>üó£Ô∏è Conjugation Examples</h2>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Affirmative (+)</th>
                            <th>Negative (-)</th>
                            <th>Interrogative (?)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>She <strong>had studied</strong> English before she moved to Scotland.</td>
                            <td>She <strong>hadn't studied</strong> English before she moved to Scotland.</td>
                            <td><strong>Had</strong> she <strong>studied</strong> English before she moved to Scotland?</td>
                        </tr>
                        <tr>
                            <td>He <strong>had seen</strong> a bear before he visited Alaska.</td>
                            <td>He <strong>hadn't seen</strong> a bear before he visited Alaska.</td>
                            <td><strong>Had</strong> he <strong>seen</strong> a bear before he visited Alaska?</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section>
            <h2>üìù More Examples</h2>
            <ul>
                <li>I <strong>had never seen</strong> such a beautiful beach before I went to Hawaii.</li>
                <li>We were not able to get a hotel room because we <strong>had not booked</strong> in advance.</li>
            </ul>
            <div class="highlight-box" style="border-left-color: var(--secondary);">
                <p>He told me they <strong>had already paid</strong> the bill.</p>
            </div>
            <div class="highlight-box" style="border-left-color: var(--secondary);">
                <p>She only understood the movie because she <strong>had read</strong> the book.</p>
            </div>
        </section>

        <section>
            <h2>‚úÇÔ∏è Contracted Forms</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <table style="margin:0;">
                    <tr><th>Full Form</th><th>Contracted</th></tr>
                    <tr><td>I had</td><td>I'd</td></tr>
                    <tr><td>You had</td><td>You'd</td></tr>
                    <tr><td>He had</td><td>He'd</td></tr>
                    <tr><td>She had</td><td>She'd</td></tr>
                </table>
                <table style="margin:0;">
                    <tr><th>Full Form</th><th>Contracted</th></tr>
                    <tr><td>It had</td><td>It'd</td></tr>
                    <tr><td>We had</td><td>We'd</td></tr>
                    <tr><td>They had</td><td>They'd</td></tr>
                    <tr><td>&nbsp;</td><td>&nbsp;</td></tr>
                </table>
            </div>
        </section>

        <section>
            <div class="top-tip">
                <h3>TOP TIP!</h3>
                <p>The <strong>'d</strong> contraction is also used for the auxiliary verb <strong>would</strong>.</p>
                <p>For example, <em>we'd</em> can mean:</p>
                <ul>
                    <li>We had</li>
                    <li>OR</li>
                    <li>We would</li>
                </ul>
                <p>But usually the main verb is in a different form. It is always clear from the context.</p>
                <div style="background: rgba(255,255,255,0.5); padding: 10px; border-radius: 5px;">
                    <p>‚úÖ <strong>We had arrived</strong> (past participle)</p>
                    <p>‚úÖ <strong>We would arrive</strong> (base form)</p>
                </div>
            </div>
        </section>

        <section id="exercises">
            <h2>‚úçÔ∏è Exercises: Test your knowledge</h2>
            <p>Complete the sentences using the verbs in brackets in the <strong>Past Perfect</strong> tense.</p>
            
            <div class="exercise-area">
                
                <div class="question">
                    <label>1. When I got to the station, the train (leave) <input type="text" id="q1" placeholder="Type here..."> already.</label>
                    <span class="feedback" id="f1"></span>
                </div>

                <div class="question">
                    <label>2. She was hungry because she (not / eat) <input type="text" id="q2" placeholder="Type here..."> anything all day.</label>
                    <span class="feedback" id="f2"></span>
                </div>

                <div class="question">
                    <label>3. <input type="text" id="q3" placeholder="Had/Have?"> they been to France before the trip?</label>
                    <span class="feedback" id="f3"></span>
                </div>

                <div class="question">
                    <label>4. "I'd visited Rome" means:</label><br>
                    <select id="q4">
                        <option value="">Select an option</option>
                        <option value="wrong">I would visit Rome</option>
                        <option value="correct">I had visited Rome</option>
                    </select>
                    <span class="feedback" id="f4"></span>
                </div>

                 <div class="question">
                    <label>5. We ________ the movie before, so we didn't want to watch it again.</label><br>
                    <select id="q5">
                        <option value="">Select an option</option>
                        <option value="wrong">have seen</option>
                        <option value="wrong">saw</option>
                        <option value="correct">had seen</option>
                    </select>
                    <span class="feedback" id="f5"></span>
                </div>

                <button class="btn-check" onclick="checkAnswers()">Check Answers</button>

            </div>
        </section>

        <footer style="text-align: center; margin-top: 50px; color: var(--text-muted); padding-bottom: 20px;">
            <p>Study Material - Past Perfect Tense</p>
        </footer>

    </div>

    <script>
        // Theme Toggle Logic
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.setAttribute('data-theme', newTheme);
        }

        // Exercise Logic
        function checkAnswers() {
            let score = 0;
            
            // Answer Key (Normalization handles case insensitivity)
            const answers = {
                q1: ["had left"],
                q2: ["had not eaten", "hadn't eaten"],
                q3: ["had"]
            };

            // Check Text Inputs
            for (let id in answers) {
                let userVal = document.getElementById(id).value.trim().toLowerCase();
                let feedbackEl = document.getElementById('f' + id.substring(1));
                
                if (answers[id].includes(userVal)) {
                    feedbackEl.innerHTML = "‚úÖ Correct!";
                    feedbackEl.className = "feedback correct";
                    feedbackEl.style.display = "inline";
                } else {
                    feedbackEl.innerHTML = "‚ùå Try again (Hint: " + answers[id][0] + ")";
                    feedbackEl.className = "feedback incorrect";
                    feedbackEl.style.display = "inline";
                }
            }

            // Check Select Inputs
            const selectIds = ['q4', 'q5'];
            selectIds.forEach(id => {
                let userVal = document.getElementById(id).value;
                let feedbackEl = document.getElementById('f' + id.substring(1));

                if (userVal === "correct") {
                    feedbackEl.innerHTML = "‚úÖ Correct!";
                    feedbackEl.className = "feedback correct";
                    feedbackEl.style.display = "inline";
                } else if (userVal === "wrong") {
                    feedbackEl.innerHTML = "‚ùå Incorrect.";
                    feedbackEl.className = "feedback incorrect";
                    feedbackEl.style.display = "inline";
                } else {
                    feedbackEl.innerHTML = "";
                }
            });
        }
    </script>
</body>
</html>